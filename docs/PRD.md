# Anki复习助手 - 产品需求文档(PRD)

## 产品信息结构图

```
Anki复习助手
├── 今日复习
│   ├── 导航栏
│   │   ├── 页面标题     # "今日复习"
│   │   └── 新增按钮     # 跳转到新增卡片页面，保存后返回今日复习页面并自动刷新数据
│   │
│   ├── 复习卡片区域
│   │   ├── 卡片正面
│   │   │   ├── 知识点     # 主要内容
│   │   │   ├── 创建时间
│   │   │   ├── 已复习次数
│   │   │   ├── 下次复习时间     # 点击可打开日历选择器，手动设置下次复习时间，不影响复习次数和间隔规则
│   │   │   ├── 掌握按钮     # 进入下一复习周期
│   │   │   └── 忘记按钮     # 重置复习进度
│   │   │
│   │   └── 卡片反面
│   │       ├── 答案     # 主要内容
│   │       ├── 创建时间
│   │       ├── 已复习次数
│   │       ├── 下次复习时间     # 点击可打开日历选择器，手动设置下次复习时间，不影响复习次数和间隔规则
│   │       ├── 掌握按钮     # 进入下一复习周期
│   │       └── 忘记按钮     # 重置复习进度
│   │
│   └── 卡片操作
│       ├── 点击翻面     # 切换正反面
│       └── 左右滑动     # 左右滑动切换卡片，如果当前卡片处于反面，切换时会自动重置为正面，以保持学习连贯性
│
├── 卡片库
│   ├── 导航栏
│   │   ├── 页面标题     # "卡片库"
│   │   └── 新增按钮     # 跳转到新增卡片页面
│   │
│   ├── 搜索栏
│   │   ├── 搜索框     # 知识点或答案的实时模糊搜索
│   │   └── 清空按钮     # 清除搜索结果
│   │
│   ├── 新增卡片页面    # 从卡片库新增按钮进入
│   │   ├── 导航栏
│   │   │   ├── 返回按钮     # 返回卡片库
│   │   │   ├── 页面标题     # "新增卡片"
│   │   │   └── 保存按钮     # 保存卡片内容，根据来源不同有不同的保存后行为：
│   │   │       ├── 从卡片库进入：返回卡片库并更新列表数据
│   │   │       └── 从今日复习进入：返回今日复习页面并刷新数据
│   │   └── 创建知识点卡片
│   │       ├── 知识点输入区  # 最多输入100字
│   │       └── 答案输入区    # 支持富文本编辑，最多输入500字
│   │
│   └── 卡片列表
│       ├── 列表项
│       │   ├── 知识点     # 主要信息，最多显示2行
│       │   ├── 创建时间     # 次要信息
│       │   ├── 已复习次数     # 进度指标
│       │   └── 下次复习时间     # 计划提示
│       │
│       ├── 左滑操作
│       │   ├── 删除     # 需二次确认
│       │   └── 编辑     # 进入编辑页面
│       │
│       └── 卡片详情     # 点击列表项弹出
│           ├── 导航栏
│           │   ├── 返回按钮     # 返回卡片列表
│           │   ├── 页面标题     # "卡片详情"
│           │   └── 编辑按钮     # 进入编辑页面
│           ├── 知识点展示区
│           ├── 答案展示区
│           ├── 创建时间     # 次要信息
│           ├── 已复习次数     # 进度指标
│           ├── 下次复习时间     # 计划提示
│           │
│           └── 编辑页面
│               ├── 导航栏
│               │   ├── 返回按钮     # 返回详情页
│               │   ├── 页面标题     # "编辑卡片"
│               │   └── 删除按钮     # 删除当前卡片（需二次确认）
│               │   └── 保存按钮     # 保存修改内容，并关闭编辑、详情弹窗，刷新卡片列表数据
│               ├── 修改知识点
│               └── 修改答案
│
└── 设置
    ├── 导航栏
    │   └── 页面标题     # "设置"
    └── 复习规则设置
        ├── 标题：复习规则设置
        ├── 说明文字：
        ├── 规则列表：
            - 最多支持20次复习的间隔设置
            - 每行显示：第X次复习 | 间隔天数输入框
            - 默认值
        └── 操作按钮：
            - 恢复默认：点击后重置为默认间隔规则
            - 保存：保存当前设置的间隔规则
            - 重置：清空所有设置，恢复为默认值

## 产品功能详情说明

### 1. 今日复习
- 功能说明：展示今日需要复习的内容
- 导航栏：
  - 页面标题：显示"今日复习"
  - 新增按钮：点击跳转至新增卡片页面

#### 1.1 复习卡片展示
- 展示范围：仅显示下次复习时间是今天及以前的卡片
- 卡片布局：
  - 正面内容：
    - 知识点（主要内容）
    - 创建时间
    - 已复习次数
    - 下次复习时间     # 点击可打开日历选择器，手动设置下次复习时间，不影响复习次数和间隔规则
    - 掌握按钮     # 进入下一复习周期
    - 忘记按钮     # 重置复习进度
  - 反面内容：
    - 答案（主要内容）
    - 创建时间
    - 已复习次数
    - 下次复习时间     # 点击可打开日历选择器，手动设置下次复习时间，不影响复习次数和间隔规则
    - 掌握按钮     # 进入下一复习周期
    - 忘记按钮     # 重置复习进度

#### 1.2 卡片交互
- 翻面操作：点击卡片可切换正反面
- 切换卡片：左右滑动可切换上下张卡片

#### 1.3 复习规则
1. 初始状态：
   - 新卡片复习次数为0
   - 下次复习时间为创建时间

2. 掌握按钮：
   - 复习次数加1
   - 根据复习次数计算下次复习时间

3. 忘记按钮：
   - 复习次数重置为0
   - 需要重新开始复习周期
   - 下次复习时间的起点应重置为当前时间

4. 手动调整复习时间：
   - 点击下次复习时间可打开日历选择器
     - 下次复习时间使用特殊样式（蓝色下划线）标注，提示用户可点击
     - 鼠标悬停时显示手型光标
   - 日期选择规则：
     - 可选择任意日期（包括过去日期）
     - 选择过去日期：卡片会立即出现在今日复习列表中
     - 选择未来日期：卡片会在指定日期出现在今日复习列表中
   - 修改下次复习时间不会影响已复习次数
   - 修改下次复习时间不会重置或改变复习间隔规则
   - 修改完成后：
     - 立即更新卡片的下次复习时间
     - 自动刷新当前页面的数据
     - 如果在今日复习页面：
       - 选择未来日期时，该卡片会从今日复习列表中移除
       - 如果还有其他卡片，自动切换到下一张卡片
   - 适用场景：
     - 临时调整学习计划
     - 提前或推迟特定卡片的复习时间
     - 修正之前错误推迟的复习时间
     - 自定义复习时间以适应个人时间安排
   - 全局统一实现：
     - 在以下位置均可通过点击下次复习时间来修改：
       1. 今日复习页面（卡片正反面）
       2. 卡片库列表页
       3. 卡片详情页
     - 保持一致的交互体验：
       - 统一的可点击样式
       - 统一的日历选择器
       - 统一的数据更新逻辑

### 2. 新增卡片
#### 2.1 从今日复习页面进入
- 导航栏：
  - 页面标题：显示"新增卡片"
  - 保存按钮：保存卡片内容后返回今日复习页面，并自动刷新数据以显示新卡片
- 创建知识点卡片：
  - 知识点输入区：文本输入框，最多输入100字
  - 答案输入区：支持富文本编辑，最多输入500字

#### 2.2 从卡片库进入
- 导航栏：
  - 返回按钮：返回卡片库
  - 页面标题：显示"新增卡片"
  - 保存按钮：保存卡片内容后清空表单，显示成功提示，停留在当前页面
- 创建知识点卡片：
  - 知识点输入区：文本输入框，最多输入100字
  - 答案输入区：支持富文本编辑，最多输入500字

### 3. 卡片库
#### 3.1 导航栏
- 页面标题：显示"卡片库"
- 新增按钮：点击跳转至新增卡片页面

#### 3.2 搜索栏
- 搜索框：支持对知识点和答案内容进行实时模糊搜索
- 清空按钮：一键清除搜索内容，恢复完整卡片列表

#### 3.3 卡片列表
- 列表项展示：
  - 知识点：作为主要信息展示，最多显示2行
  - 创建时间：以次要信息形式展示
  - 已复习次数：直观展示学习进度
  - 下次复习时间：提示用户复习计划，支持点击修改
- 排序规则：
  - 默认按照创建时间倒序排列（最新创建的卡片显示在最前面）
  - 搜索结果也保持相同的排序规则
- 交互功能：
  - 左滑操作：
    - 删除：支持快速删除，设有二次确认防止误操作
    - 编辑：直接进入编辑页面修改内容
  - 点击列表项：进入卡片详情页面

#### 3.4 卡片详情
- 导航栏：
  - 返回按钮：返回卡片列表
  - 页面标题：显示"卡片详情"
  - 编辑按钮：进入编辑页面
- 内容展示：
  - 知识点展示区：完整展示知识点内容
  - 答案展示区：完整展示答案内容
  - 创建时间：以次要信息形式展示
  - 已复习次数：直观展示学习进度
  - 下次复习时间：提示用户复习计划，支持点击修改

#### 3.5 编辑页面
- 导航栏：
  - 返回按钮：返回详情页
  - 页面标题：显示"编辑卡片"
  - 删除按钮：删除当前卡片（需二次确认）
  - 保存按钮：保存修改内容
- 编辑区域：
  - 修改知识点：编辑知识点内容
  - 修改答案：编辑答案内容

### 4. 设置
- 导航栏：
  - 页面标题：显示"设置"

#### 4.1 复习规则设置
- 功能说明：自定义卡片复习间隔规则，控制每次复习后的下次复习时间
- 规则说明：
  - 每次复习后，系统会根据当前复习次数查找对应的间隔天数
  - 下次复习时间 = 首次复习时间 + 累计间隔天数
  - 累计间隔天数 = 所有已复习次数的间隔天数之和
  - 例如：第1次复习间隔1天，第2次复习间隔2天，则第2次复习后的下次复习时间 = 首次复习时间 + (1+2)天

- 界面设计：
  - 标题：复习规则设置
  - 说明文字：
    ```
    设置每次复习后的间隔天数。系统会根据复习次数自动计算下次复习时间。
    例如：设置第1次间隔1天，第2次间隔2天，则第2次复习后的下次复习时间 = 首次复习时间 + (1+2)天
    ```
  - 规则列表：
    - 最多支持20次复习的间隔设置
    - 每行显示：第X次复习 | 间隔天数输入框
    - 默认值：
      ```
      第1次：1天
      第2次：1天
      第3次：1天
      第4次：2天
      第5次：3天
      第6次：5天
      第7次：7天
      第8次：7天
      第9次：14天
      第10次：14天
      第11次：30天
      第12次：30天
      第13次：60天
      第14次：60天
      第15次：60天
      第16次：60天
      第17次：60天
      第18次：60天
      第19次：60天
      第20次：60天
      ```
  - 操作按钮：
    - 恢复默认：点击后重置为默认间隔规则
    - 保存：保存当前设置的间隔规则
    - 重置：清空所有设置，恢复为默认值

- 交互说明：
  - 输入限制：
    - 间隔天数必须为正整数
    - 建议范围：1-365天
    - 超出范围时显示提示信息
  - 保存规则：
    - 支持批量修改多条数据
    - 点击保存后立即生效
    - 新规则仅影响后续复习的卡片
    - 已进入复习周期的卡片不受影响
  - 恢复默认：
    - 点击后显示确认对话框
    - 确认后立即恢复默认规则
    - 恢复后需要点击保存才能生效

- 注意事项：
  - 修改规则不会影响已进入复习周期的卡片
  - 建议根据个人学习能力和记忆特点设置合适的间隔
  - 间隔时间过短可能导致复习压力过大
  - 间隔时间过长可能导致记忆效果下降